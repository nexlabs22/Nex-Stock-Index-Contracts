{"abi":[{"type":"error","name":"DecimalsTooLarge","inputs":[]},{"type":"error","name":"FeeTooLarge","inputs":[]}],"bytecode":{"object":"0x60566050600b82828239805160001a6073146043577f4e487b7100000000000000000000000000000000000000000000000000000000600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220cd0aba6bcc53af241de1abbfe6df17e4e33e3794192b76fa6bb3ca4f7125ad3264736f6c63430008190033","sourceMap":"345:1562:10:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220cd0aba6bcc53af241de1abbfe6df17e4e33e3794192b76fa6bb3ca4f7125ad3264736f6c63430008190033","sourceMap":"345:1562:10:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.25+commit.b61c2a91\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"DecimalsTooLarge\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FeeTooLarge\",\"type\":\"error\"}],\"devdoc\":{\"errors\":{\"DecimalsTooLarge()\":[{\"details\":\"Decimals are too large\"}],\"FeeTooLarge()\":[{\"details\":\"Fee is too large\"}]},\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/dinary/common/FeeLib.sol\":\"FeeLib\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":@chainlink/=node_modules/@chainlink/\",\":@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/\",\":@openzeppelin/=node_modules/@openzeppelin/\",\":@prb/=node_modules/@prb/\",\":@thirdweb-dev/=node_modules/@thirdweb-dev/\",\":base64-sol/=node_modules/base64-sol/\",\":ds-test/=node_modules/@thirdweb-dev/dynamic-contracts/lib/forge-std/lib/ds-test/\",\":erc721a-upgradeable/=node_modules/erc721a-upgradeable/\",\":eth-gas-reporter/=node_modules/eth-gas-reporter/\",\":forge-std/=lib/forge-std/src/\",\":hardhat/=node_modules/hardhat/\",\":prb-math/=node_modules/prb-math/\",\":solady/=node_modules/solady/\",\":sstore2/=node_modules/@thirdweb-dev/dynamic-contracts/lib/sstore2/\"]},\"sources\":{\"contracts/dinary/common/FeeLib.sol\":{\"keccak256\":\"0x906960e350906a908851cfa3a90b0b85f6f4df5acb147f4c0d36dae9a32947b3\",\"license\":\"GPL-3.0-or-later\",\"urls\":[\"bzz-raw://fdb42f1f0552436cc992e9d2e3d509b76b2e9b4e3ec88074c1043cbf56fa06c7\",\"dweb:/ipfs/QmdT4MGge4afss72nNkzj7xDkggBUKYhG38sYxVN6YWbDs\"]},\"node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c\",\"dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq\"]},\"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol\":{\"keccak256\":\"0xaa761817f6cd7892fcf158b3c776b34551cde36f48ff9703d53898bc45a94ea2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ad7c8d4d08938c8dfc43d75a148863fb324b80cf53e0a36f7e5a4ac29008850\",\"dweb:/ipfs/QmcrhfPgVNf5mkdhQvy1pMv51TFokD3Y4Wa5WZhFqVh8UV\"]},\"node_modules/@prb/math/src/Common.sol\":{\"keccak256\":\"0xaa374e2c26cc93e8c22a6953804ee05f811597ef5fa82f76824378b22944778b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://279c732e161d623cf4d8a9519ca4c42c0c2db99842d0eb2a20c10fde3fa722c9\",\"dweb:/ipfs/QmVViuUXbinQGqtG5M21SgVzKihiCbFUChd4tDhtvwRmxH\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.25+commit.b61c2a91"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"DecimalsTooLarge"},{"inputs":[],"type":"error","name":"FeeTooLarge"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@chainlink/=node_modules/@chainlink/","@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/","@openzeppelin/=node_modules/@openzeppelin/","@prb/=node_modules/@prb/","@thirdweb-dev/=node_modules/@thirdweb-dev/","base64-sol/=node_modules/base64-sol/","ds-test/=node_modules/@thirdweb-dev/dynamic-contracts/lib/forge-std/lib/ds-test/","erc721a-upgradeable/=node_modules/erc721a-upgradeable/","eth-gas-reporter/=node_modules/eth-gas-reporter/","forge-std/=lib/forge-std/src/","hardhat/=node_modules/hardhat/","prb-math/=node_modules/prb-math/","solady/=node_modules/solady/","sstore2/=node_modules/@thirdweb-dev/dynamic-contracts/lib/sstore2/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/dinary/common/FeeLib.sol":"FeeLib"},"evmVersion":"paris","libraries":{}},"sources":{"contracts/dinary/common/FeeLib.sol":{"keccak256":"0x906960e350906a908851cfa3a90b0b85f6f4df5acb147f4c0d36dae9a32947b3","urls":["bzz-raw://fdb42f1f0552436cc992e9d2e3d509b76b2e9b4e3ec88074c1043cbf56fa06c7","dweb:/ipfs/QmdT4MGge4afss72nNkzj7xDkggBUKYhG38sYxVN6YWbDs"],"license":"GPL-3.0-or-later"},"node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70","urls":["bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c","dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq"],"license":"MIT"},"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol":{"keccak256":"0xaa761817f6cd7892fcf158b3c776b34551cde36f48ff9703d53898bc45a94ea2","urls":["bzz-raw://0ad7c8d4d08938c8dfc43d75a148863fb324b80cf53e0a36f7e5a4ac29008850","dweb:/ipfs/QmcrhfPgVNf5mkdhQvy1pMv51TFokD3Y4Wa5WZhFqVh8UV"],"license":"MIT"},"node_modules/@prb/math/src/Common.sol":{"keccak256":"0xaa374e2c26cc93e8c22a6953804ee05f811597ef5fa82f76824378b22944778b","urls":["bzz-raw://279c732e161d623cf4d8a9519ca4c42c0c2db99842d0eb2a20c10fde3fa722c9","dweb:/ipfs/QmVViuUXbinQGqtG5M21SgVzKihiCbFUChd4tDhtvwRmxH"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"contracts/dinary/common/FeeLib.sol","id":2719,"exportedSymbols":{"FeeLib":[2718],"IERC20":[72721],"IERC20Metadata":[72747],"PrbMath":[2580]},"nodeType":"SourceUnit","src":"45:1863:10","nodes":[{"id":2579,"nodeType":"PragmaDirective","src":"45:24:10","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":2580,"nodeType":"ImportDirective","src":"120:45:10","nodes":[],"absolutePath":"node_modules/@prb/math/src/Common.sol","file":"@prb/math/src/Common.sol","nameLocation":"157:7:10","scope":2719,"sourceUnit":79966,"symbolAliases":[],"unitAlias":"PrbMath"},{"id":2581,"nodeType":"ImportDirective","src":"268:75:10","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol","file":"@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol","nameLocation":"-1:-1:-1","scope":2719,"sourceUnit":72748,"symbolAliases":[],"unitAlias":""},{"id":2718,"nodeType":"ContractDefinition","src":"345:1562:10","nodes":[{"id":2584,"nodeType":"VariableDeclaration","src":"391:55:10","nodes":[],"constant":true,"mutability":"constant","name":"_ONEHUNDRED_PERCENT","nameLocation":"415:19:10","scope":2718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2582,"name":"uint24","nodeType":"ElementaryTypeName","src":"391:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"value":{"hexValue":"315f3030305f303030","id":2583,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"437:9:10","typeDescriptions":{"typeIdentifier":"t_rational_1000000_by_1","typeString":"int_const 1000000"},"value":"1_000_000"},"visibility":"private"},{"id":2587,"nodeType":"VariableDeclaration","src":"453:46:10","nodes":[],"constant":true,"mutability":"constant","name":"_FLAT_FEE_DECIMALS","nameLocation":"477:18:10","scope":2718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":2585,"name":"uint64","nodeType":"ElementaryTypeName","src":"453:6:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"value":{"hexValue":"38","id":2586,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"498:1:10","typeDescriptions":{"typeIdentifier":"t_rational_8_by_1","typeString":"int_const 8"},"value":"8"},"visibility":"private"},{"id":2590,"nodeType":"ErrorDefinition","src":"536:20:10","nodes":[],"documentation":{"id":2588,"nodeType":"StructuredDocumentation","src":"506:25:10","text":"@dev Fee is too large"},"errorSelector":"fc5bee12","name":"FeeTooLarge","nameLocation":"542:11:10","parameters":{"id":2589,"nodeType":"ParameterList","parameters":[],"src":"553:2:10"}},{"id":2593,"nodeType":"ErrorDefinition","src":"597:25:10","nodes":[],"documentation":{"id":2591,"nodeType":"StructuredDocumentation","src":"561:31:10","text":"@dev Decimals are too large"},"errorSelector":"3c9c1e2d","name":"DecimalsTooLarge","nameLocation":"603:16:10","parameters":{"id":2592,"nodeType":"ParameterList","parameters":[],"src":"619:2:10"}},{"id":2606,"nodeType":"FunctionDefinition","src":"628:157:10","nodes":[],"body":{"id":2605,"nodeType":"Block","src":"701:84:10","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2600,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2598,"name":"_percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2595,"src":"715:18:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":2599,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2584,"src":"737:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"src":"715:41:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2604,"nodeType":"IfStatement","src":"711:67:10","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2601,"name":"FeeTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2590,"src":"765:11:10","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2602,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"765:13:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2603,"nodeType":"RevertStatement","src":"758:20:10"}}]},"implemented":true,"kind":"function","modifiers":[],"name":"checkPercentageFeeRate","nameLocation":"637:22:10","parameters":{"id":2596,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2595,"mutability":"mutable","name":"_percentageFeeRate","nameLocation":"667:18:10","nodeType":"VariableDeclaration","scope":2606,"src":"660:25:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2594,"name":"uint24","nodeType":"ElementaryTypeName","src":"660:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"}],"src":"659:27:10"},"returnParameters":{"id":2597,"nodeType":"ParameterList","parameters":[],"src":"701:0:10"},"scope":2718,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2635,"nodeType":"FunctionDefinition","src":"791:294:10","nodes":[],"body":{"id":2634,"nodeType":"Block","src":"895:190:10","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2617,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2615,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2610,"src":"909:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":2616,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2584,"src":"930:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"src":"909:40:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2621,"nodeType":"IfStatement","src":"905:66:10","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2618,"name":"FeeTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2590,"src":"958:11:10","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2619,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"958:13:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2620,"nodeType":"RevertStatement","src":"951:20:10"}},{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2624,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2622,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2610,"src":"988:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":2623,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1009:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"988:22:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":2631,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1077:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":2632,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"988:90:10","trueExpression":{"arguments":[{"id":2627,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2608,"src":"1028:5:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":2628,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2610,"src":"1035:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},{"id":2629,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2584,"src":"1054:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint24","typeString":"uint24"},{"typeIdentifier":"t_uint24","typeString":"uint24"}],"expression":{"id":2625,"name":"PrbMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2580,"src":"1013:7:10","typeDescriptions":{"typeIdentifier":"t_module_79966","typeString":"module \"node_modules/@prb/math/src/Common.sol\""}},"id":2626,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1021:6:10","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":79547,"src":"1013:14:10","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":2630,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1013:61:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":2614,"id":2633,"nodeType":"Return","src":"981:97:10"}]},"implemented":true,"kind":"function","modifiers":[],"name":"percentageFeeForValue","nameLocation":"800:21:10","parameters":{"id":2611,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2608,"mutability":"mutable","name":"value","nameLocation":"830:5:10","nodeType":"VariableDeclaration","scope":2635,"src":"822:13:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2607,"name":"uint256","nodeType":"ElementaryTypeName","src":"822:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":2610,"mutability":"mutable","name":"percentageFeeRate","nameLocation":"844:17:10","nodeType":"VariableDeclaration","scope":2635,"src":"837:24:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2609,"name":"uint24","nodeType":"ElementaryTypeName","src":"837:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"}],"src":"821:41:10"},"returnParameters":{"id":2614,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2613,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":2635,"src":"886:7:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2612,"name":"uint256","nodeType":"ElementaryTypeName","src":"886:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"885:9:10"},"scope":2718,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2695,"nodeType":"FunctionDefinition","src":"1091:583:10","nodes":[],"body":{"id":2694,"nodeType":"Block","src":"1204:470:10","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":2646,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2644,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2637,"src":"1218:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3138","id":2645,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1241:2:10","typeDescriptions":{"typeIdentifier":"t_rational_18_by_1","typeString":"int_const 18"},"value":"18"},"src":"1218:25:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2650,"nodeType":"IfStatement","src":"1214:56:10","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2647,"name":"DecimalsTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2593,"src":"1252:16:10","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2648,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1252:18:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2649,"nodeType":"RevertStatement","src":"1245:25:10"}},{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2653,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2651,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2639,"src":"1284:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":2652,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1299:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1284:16:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2656,"nodeType":"IfStatement","src":"1280:30:10","trueBody":{"expression":{"hexValue":"30","id":2654,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1309:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":2643,"id":2655,"nodeType":"Return","src":"1302:8:10"}},{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2659,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2657,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2637,"src":"1324:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":2658,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2587,"src":"1347:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1324:41:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2674,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2672,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2637,"src":"1475:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":2673,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2587,"src":"1498:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1475:41:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":2691,"nodeType":"Block","src":"1622:46:10","statements":[{"expression":{"id":2689,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2687,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2642,"src":"1636:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":2688,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2639,"src":"1646:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1636:21:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2690,"nodeType":"ExpressionStatement","src":"1636:21:10"}]},"id":2692,"nodeType":"IfStatement","src":"1471:197:10","trueBody":{"id":2686,"nodeType":"Block","src":"1518:98:10","statements":[{"expression":{"id":2684,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2675,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2642,"src":"1532:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2683,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2676,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2639,"src":"1542:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2682,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":2677,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1556:2:10","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2680,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2678,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2587,"src":"1563:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":2679,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2637,"src":"1584:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"1563:41:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"id":2681,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1562:43:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1556:49:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1542:63:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1532:73:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2685,"nodeType":"ExpressionStatement","src":"1532:73:10"}]}},"id":2693,"nodeType":"IfStatement","src":"1320:348:10","trueBody":{"id":2671,"nodeType":"Block","src":"1367:98:10","statements":[{"expression":{"id":2669,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2660,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2642,"src":"1381:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2668,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2661,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2639,"src":"1391:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2667,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":2662,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1405:2:10","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2665,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2663,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2637,"src":"1412:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":2664,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2587,"src":"1435:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1412:41:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"id":2666,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1411:43:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1405:49:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1391:63:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1381:73:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2670,"nodeType":"ExpressionStatement","src":"1381:73:10"}]}}]},"implemented":true,"kind":"function","modifiers":[],"name":"flatFeeForOrder","nameLocation":"1100:15:10","parameters":{"id":2640,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2637,"mutability":"mutable","name":"paymentTokenDecimals","nameLocation":"1122:20:10","nodeType":"VariableDeclaration","scope":2695,"src":"1116:26:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":2636,"name":"uint8","nodeType":"ElementaryTypeName","src":"1116:5:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"visibility":"internal"},{"constant":false,"id":2639,"mutability":"mutable","name":"perOrderFee","nameLocation":"1151:11:10","nodeType":"VariableDeclaration","scope":2695,"src":"1144:18:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":2638,"name":"uint64","nodeType":"ElementaryTypeName","src":"1144:6:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"1115:48:10"},"returnParameters":{"id":2643,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2642,"mutability":"mutable","name":"flatFee","nameLocation":"1195:7:10","nodeType":"VariableDeclaration","scope":2695,"src":"1187:15:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2641,"name":"uint256","nodeType":"ElementaryTypeName","src":"1187:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1186:17:10"},"scope":2718,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2717,"nodeType":"FunctionDefinition","src":"1680:225:10","nodes":[],"body":{"id":2716,"nodeType":"Block","src":"1786:119:10","nodes":[],"statements":[{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2706,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2704,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2697,"src":"1803:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":2705,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1824:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1803:22:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":2713,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1897:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":2714,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"1803:95:10","trueExpression":{"arguments":[{"id":2709,"name":"orderValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2699,"src":"1843:10:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":2710,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2697,"src":"1855:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},{"id":2711,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2584,"src":"1874:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint24","typeString":"uint24"},{"typeIdentifier":"t_uint24","typeString":"uint24"}],"expression":{"id":2707,"name":"PrbMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2580,"src":"1828:7:10","typeDescriptions":{"typeIdentifier":"t_module_79966","typeString":"module \"node_modules/@prb/math/src/Common.sol\""}},"id":2708,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1836:6:10","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":79547,"src":"1828:14:10","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":2712,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1828:66:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":2703,"id":2715,"nodeType":"Return","src":"1796:102:10"}]},"implemented":true,"kind":"function","modifiers":[],"name":"applyPercentageFee","nameLocation":"1689:18:10","parameters":{"id":2700,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2697,"mutability":"mutable","name":"percentageFeeRate","nameLocation":"1715:17:10","nodeType":"VariableDeclaration","scope":2717,"src":"1708:24:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2696,"name":"uint24","nodeType":"ElementaryTypeName","src":"1708:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"},{"constant":false,"id":2699,"mutability":"mutable","name":"orderValue","nameLocation":"1742:10:10","nodeType":"VariableDeclaration","scope":2717,"src":"1734:18:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2698,"name":"uint256","nodeType":"ElementaryTypeName","src":"1734:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1707:46:10"},"returnParameters":{"id":2703,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2702,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":2717,"src":"1777:7:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2701,"name":"uint256","nodeType":"ElementaryTypeName","src":"1777:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1776:9:10"},"scope":2718,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"FeeLib","contractDependencies":[],"contractKind":"library","fullyImplemented":true,"linearizedBaseContracts":[2718],"name":"FeeLib","nameLocation":"353:6:10","scope":2719,"usedErrors":[2590,2593],"usedEvents":[]}],"license":"GPL-3.0-or-later"},"id":10}