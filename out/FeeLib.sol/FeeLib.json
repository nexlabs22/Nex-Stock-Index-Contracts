{"abi":[{"type":"error","name":"DecimalsTooLarge","inputs":[]},{"type":"error","name":"FeeTooLarge","inputs":[]}],"bytecode":{"object":"0x6055604b600b8282823980515f1a607314603f577f4e487b71000000000000000000000000000000000000000000000000000000005f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212209033e8e17c9533cd4856c221545fe82da6d907d18c4294d31ae487b4f116b29364736f6c63430008190033","sourceMap":"345:1562:10:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212209033e8e17c9533cd4856c221545fe82da6d907d18c4294d31ae487b4f116b29364736f6c63430008190033","sourceMap":"345:1562:10:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.25+commit.b61c2a91\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"DecimalsTooLarge\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FeeTooLarge\",\"type\":\"error\"}],\"devdoc\":{\"errors\":{\"DecimalsTooLarge()\":[{\"details\":\"Decimals are too large\"}],\"FeeTooLarge()\":[{\"details\":\"Fee is too large\"}]},\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/dinary/common/FeeLib.sol\":\"FeeLib\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":@chainlink/=node_modules/@chainlink/\",\":@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/\",\":@openzeppelin/=node_modules/@openzeppelin/\",\":@prb/=node_modules/@prb/\",\":@thirdweb-dev/=node_modules/@thirdweb-dev/\",\":base64-sol/=node_modules/base64-sol/\",\":ds-test/=node_modules/@thirdweb-dev/dynamic-contracts/lib/forge-std/lib/ds-test/\",\":erc721a-upgradeable/=node_modules/erc721a-upgradeable/\",\":eth-gas-reporter/=node_modules/eth-gas-reporter/\",\":forge-std/=lib/forge-std/src/\",\":hardhat/=node_modules/hardhat/\",\":prb-math/=node_modules/prb-math/\",\":solady/=node_modules/solady/\",\":sstore2/=node_modules/@thirdweb-dev/dynamic-contracts/lib/sstore2/\"]},\"sources\":{\"contracts/dinary/common/FeeLib.sol\":{\"keccak256\":\"0x906960e350906a908851cfa3a90b0b85f6f4df5acb147f4c0d36dae9a32947b3\",\"license\":\"GPL-3.0-or-later\",\"urls\":[\"bzz-raw://fdb42f1f0552436cc992e9d2e3d509b76b2e9b4e3ec88074c1043cbf56fa06c7\",\"dweb:/ipfs/QmdT4MGge4afss72nNkzj7xDkggBUKYhG38sYxVN6YWbDs\"]},\"node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c\",\"dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq\"]},\"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol\":{\"keccak256\":\"0xaa761817f6cd7892fcf158b3c776b34551cde36f48ff9703d53898bc45a94ea2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ad7c8d4d08938c8dfc43d75a148863fb324b80cf53e0a36f7e5a4ac29008850\",\"dweb:/ipfs/QmcrhfPgVNf5mkdhQvy1pMv51TFokD3Y4Wa5WZhFqVh8UV\"]},\"node_modules/@prb/math/src/Common.sol\":{\"keccak256\":\"0xaa374e2c26cc93e8c22a6953804ee05f811597ef5fa82f76824378b22944778b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://279c732e161d623cf4d8a9519ca4c42c0c2db99842d0eb2a20c10fde3fa722c9\",\"dweb:/ipfs/QmVViuUXbinQGqtG5M21SgVzKihiCbFUChd4tDhtvwRmxH\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.25+commit.b61c2a91"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"DecimalsTooLarge"},{"inputs":[],"type":"error","name":"FeeTooLarge"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@chainlink/=node_modules/@chainlink/","@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/","@openzeppelin/=node_modules/@openzeppelin/","@prb/=node_modules/@prb/","@thirdweb-dev/=node_modules/@thirdweb-dev/","base64-sol/=node_modules/base64-sol/","ds-test/=node_modules/@thirdweb-dev/dynamic-contracts/lib/forge-std/lib/ds-test/","erc721a-upgradeable/=node_modules/erc721a-upgradeable/","eth-gas-reporter/=node_modules/eth-gas-reporter/","forge-std/=lib/forge-std/src/","hardhat/=node_modules/hardhat/","prb-math/=node_modules/prb-math/","solady/=node_modules/solady/","sstore2/=node_modules/@thirdweb-dev/dynamic-contracts/lib/sstore2/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/dinary/common/FeeLib.sol":"FeeLib"},"evmVersion":"cancun","libraries":{}},"sources":{"contracts/dinary/common/FeeLib.sol":{"keccak256":"0x906960e350906a908851cfa3a90b0b85f6f4df5acb147f4c0d36dae9a32947b3","urls":["bzz-raw://fdb42f1f0552436cc992e9d2e3d509b76b2e9b4e3ec88074c1043cbf56fa06c7","dweb:/ipfs/QmdT4MGge4afss72nNkzj7xDkggBUKYhG38sYxVN6YWbDs"],"license":"GPL-3.0-or-later"},"node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70","urls":["bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c","dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq"],"license":"MIT"},"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol":{"keccak256":"0xaa761817f6cd7892fcf158b3c776b34551cde36f48ff9703d53898bc45a94ea2","urls":["bzz-raw://0ad7c8d4d08938c8dfc43d75a148863fb324b80cf53e0a36f7e5a4ac29008850","dweb:/ipfs/QmcrhfPgVNf5mkdhQvy1pMv51TFokD3Y4Wa5WZhFqVh8UV"],"license":"MIT"},"node_modules/@prb/math/src/Common.sol":{"keccak256":"0xaa374e2c26cc93e8c22a6953804ee05f811597ef5fa82f76824378b22944778b","urls":["bzz-raw://279c732e161d623cf4d8a9519ca4c42c0c2db99842d0eb2a20c10fde3fa722c9","dweb:/ipfs/QmVViuUXbinQGqtG5M21SgVzKihiCbFUChd4tDhtvwRmxH"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"contracts/dinary/common/FeeLib.sol","id":2731,"exportedSymbols":{"FeeLib":[2730],"IERC20":[65525],"IERC20Metadata":[65551],"PrbMath":[2592]},"nodeType":"SourceUnit","src":"45:1863:10","nodes":[{"id":2591,"nodeType":"PragmaDirective","src":"45:24:10","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":2592,"nodeType":"ImportDirective","src":"120:45:10","nodes":[],"absolutePath":"node_modules/@prb/math/src/Common.sol","file":"@prb/math/src/Common.sol","nameLocation":"157:7:10","scope":2731,"sourceUnit":72770,"symbolAliases":[],"unitAlias":"PrbMath"},{"id":2593,"nodeType":"ImportDirective","src":"268:75:10","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol","file":"@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol","nameLocation":"-1:-1:-1","scope":2731,"sourceUnit":65552,"symbolAliases":[],"unitAlias":""},{"id":2730,"nodeType":"ContractDefinition","src":"345:1562:10","nodes":[{"id":2596,"nodeType":"VariableDeclaration","src":"391:55:10","nodes":[],"constant":true,"mutability":"constant","name":"_ONEHUNDRED_PERCENT","nameLocation":"415:19:10","scope":2730,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2594,"name":"uint24","nodeType":"ElementaryTypeName","src":"391:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"value":{"hexValue":"315f3030305f303030","id":2595,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"437:9:10","typeDescriptions":{"typeIdentifier":"t_rational_1000000_by_1","typeString":"int_const 1000000"},"value":"1_000_000"},"visibility":"private"},{"id":2599,"nodeType":"VariableDeclaration","src":"453:46:10","nodes":[],"constant":true,"mutability":"constant","name":"_FLAT_FEE_DECIMALS","nameLocation":"477:18:10","scope":2730,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":2597,"name":"uint64","nodeType":"ElementaryTypeName","src":"453:6:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"value":{"hexValue":"38","id":2598,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"498:1:10","typeDescriptions":{"typeIdentifier":"t_rational_8_by_1","typeString":"int_const 8"},"value":"8"},"visibility":"private"},{"id":2602,"nodeType":"ErrorDefinition","src":"536:20:10","nodes":[],"documentation":{"id":2600,"nodeType":"StructuredDocumentation","src":"506:25:10","text":"@dev Fee is too large"},"errorSelector":"fc5bee12","name":"FeeTooLarge","nameLocation":"542:11:10","parameters":{"id":2601,"nodeType":"ParameterList","parameters":[],"src":"553:2:10"}},{"id":2605,"nodeType":"ErrorDefinition","src":"597:25:10","nodes":[],"documentation":{"id":2603,"nodeType":"StructuredDocumentation","src":"561:31:10","text":"@dev Decimals are too large"},"errorSelector":"3c9c1e2d","name":"DecimalsTooLarge","nameLocation":"603:16:10","parameters":{"id":2604,"nodeType":"ParameterList","parameters":[],"src":"619:2:10"}},{"id":2618,"nodeType":"FunctionDefinition","src":"628:157:10","nodes":[],"body":{"id":2617,"nodeType":"Block","src":"701:84:10","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2612,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2610,"name":"_percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2607,"src":"715:18:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":2611,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2596,"src":"737:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"src":"715:41:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2616,"nodeType":"IfStatement","src":"711:67:10","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2613,"name":"FeeTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2602,"src":"765:11:10","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2614,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"765:13:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2615,"nodeType":"RevertStatement","src":"758:20:10"}}]},"implemented":true,"kind":"function","modifiers":[],"name":"checkPercentageFeeRate","nameLocation":"637:22:10","parameters":{"id":2608,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2607,"mutability":"mutable","name":"_percentageFeeRate","nameLocation":"667:18:10","nodeType":"VariableDeclaration","scope":2618,"src":"660:25:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2606,"name":"uint24","nodeType":"ElementaryTypeName","src":"660:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"}],"src":"659:27:10"},"returnParameters":{"id":2609,"nodeType":"ParameterList","parameters":[],"src":"701:0:10"},"scope":2730,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2647,"nodeType":"FunctionDefinition","src":"791:294:10","nodes":[],"body":{"id":2646,"nodeType":"Block","src":"895:190:10","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2629,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2627,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2622,"src":"909:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":2628,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2596,"src":"930:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"src":"909:40:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2633,"nodeType":"IfStatement","src":"905:66:10","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2630,"name":"FeeTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2602,"src":"958:11:10","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2631,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"958:13:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2632,"nodeType":"RevertStatement","src":"951:20:10"}},{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2636,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2634,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2622,"src":"988:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":2635,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1009:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"988:22:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":2643,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1077:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":2644,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"988:90:10","trueExpression":{"arguments":[{"id":2639,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2620,"src":"1028:5:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":2640,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2622,"src":"1035:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},{"id":2641,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2596,"src":"1054:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint24","typeString":"uint24"},{"typeIdentifier":"t_uint24","typeString":"uint24"}],"expression":{"id":2637,"name":"PrbMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2592,"src":"1013:7:10","typeDescriptions":{"typeIdentifier":"t_module_72770","typeString":"module \"node_modules/@prb/math/src/Common.sol\""}},"id":2638,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1021:6:10","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":72351,"src":"1013:14:10","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":2642,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1013:61:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":2626,"id":2645,"nodeType":"Return","src":"981:97:10"}]},"implemented":true,"kind":"function","modifiers":[],"name":"percentageFeeForValue","nameLocation":"800:21:10","parameters":{"id":2623,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2620,"mutability":"mutable","name":"value","nameLocation":"830:5:10","nodeType":"VariableDeclaration","scope":2647,"src":"822:13:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2619,"name":"uint256","nodeType":"ElementaryTypeName","src":"822:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":2622,"mutability":"mutable","name":"percentageFeeRate","nameLocation":"844:17:10","nodeType":"VariableDeclaration","scope":2647,"src":"837:24:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2621,"name":"uint24","nodeType":"ElementaryTypeName","src":"837:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"}],"src":"821:41:10"},"returnParameters":{"id":2626,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2625,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":2647,"src":"886:7:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2624,"name":"uint256","nodeType":"ElementaryTypeName","src":"886:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"885:9:10"},"scope":2730,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2707,"nodeType":"FunctionDefinition","src":"1091:583:10","nodes":[],"body":{"id":2706,"nodeType":"Block","src":"1204:470:10","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":2658,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2656,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2649,"src":"1218:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3138","id":2657,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1241:2:10","typeDescriptions":{"typeIdentifier":"t_rational_18_by_1","typeString":"int_const 18"},"value":"18"},"src":"1218:25:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2662,"nodeType":"IfStatement","src":"1214:56:10","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2659,"name":"DecimalsTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2605,"src":"1252:16:10","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2660,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1252:18:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2661,"nodeType":"RevertStatement","src":"1245:25:10"}},{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2665,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2663,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2651,"src":"1284:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":2664,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1299:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1284:16:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2668,"nodeType":"IfStatement","src":"1280:30:10","trueBody":{"expression":{"hexValue":"30","id":2666,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1309:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":2655,"id":2667,"nodeType":"Return","src":"1302:8:10"}},{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2671,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2669,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2649,"src":"1324:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":2670,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2599,"src":"1347:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1324:41:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2686,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2684,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2649,"src":"1475:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":2685,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2599,"src":"1498:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1475:41:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":2703,"nodeType":"Block","src":"1622:46:10","statements":[{"expression":{"id":2701,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2699,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2654,"src":"1636:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":2700,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2651,"src":"1646:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1636:21:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2702,"nodeType":"ExpressionStatement","src":"1636:21:10"}]},"id":2704,"nodeType":"IfStatement","src":"1471:197:10","trueBody":{"id":2698,"nodeType":"Block","src":"1518:98:10","statements":[{"expression":{"id":2696,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2687,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2654,"src":"1532:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2695,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2688,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2651,"src":"1542:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2694,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":2689,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1556:2:10","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2692,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2690,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2599,"src":"1563:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":2691,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2649,"src":"1584:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"1563:41:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"id":2693,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1562:43:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1556:49:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1542:63:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1532:73:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2697,"nodeType":"ExpressionStatement","src":"1532:73:10"}]}},"id":2705,"nodeType":"IfStatement","src":"1320:348:10","trueBody":{"id":2683,"nodeType":"Block","src":"1367:98:10","statements":[{"expression":{"id":2681,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2672,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2654,"src":"1381:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2680,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2673,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2651,"src":"1391:11:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2679,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":2674,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1405:2:10","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2677,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2675,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2649,"src":"1412:20:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":2676,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2599,"src":"1435:18:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1412:41:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"id":2678,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1411:43:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1405:49:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1391:63:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1381:73:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2682,"nodeType":"ExpressionStatement","src":"1381:73:10"}]}}]},"implemented":true,"kind":"function","modifiers":[],"name":"flatFeeForOrder","nameLocation":"1100:15:10","parameters":{"id":2652,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2649,"mutability":"mutable","name":"paymentTokenDecimals","nameLocation":"1122:20:10","nodeType":"VariableDeclaration","scope":2707,"src":"1116:26:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":2648,"name":"uint8","nodeType":"ElementaryTypeName","src":"1116:5:10","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"visibility":"internal"},{"constant":false,"id":2651,"mutability":"mutable","name":"perOrderFee","nameLocation":"1151:11:10","nodeType":"VariableDeclaration","scope":2707,"src":"1144:18:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":2650,"name":"uint64","nodeType":"ElementaryTypeName","src":"1144:6:10","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"1115:48:10"},"returnParameters":{"id":2655,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2654,"mutability":"mutable","name":"flatFee","nameLocation":"1195:7:10","nodeType":"VariableDeclaration","scope":2707,"src":"1187:15:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2653,"name":"uint256","nodeType":"ElementaryTypeName","src":"1187:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1186:17:10"},"scope":2730,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2729,"nodeType":"FunctionDefinition","src":"1680:225:10","nodes":[],"body":{"id":2728,"nodeType":"Block","src":"1786:119:10","nodes":[],"statements":[{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2718,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2716,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2709,"src":"1803:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":2717,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1824:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1803:22:10","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":2725,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1897:1:10","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":2726,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"1803:95:10","trueExpression":{"arguments":[{"id":2721,"name":"orderValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2711,"src":"1843:10:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":2722,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2709,"src":"1855:17:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},{"id":2723,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2596,"src":"1874:19:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint24","typeString":"uint24"},{"typeIdentifier":"t_uint24","typeString":"uint24"}],"expression":{"id":2719,"name":"PrbMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2592,"src":"1828:7:10","typeDescriptions":{"typeIdentifier":"t_module_72770","typeString":"module \"node_modules/@prb/math/src/Common.sol\""}},"id":2720,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1836:6:10","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":72351,"src":"1828:14:10","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":2724,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1828:66:10","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":2715,"id":2727,"nodeType":"Return","src":"1796:102:10"}]},"implemented":true,"kind":"function","modifiers":[],"name":"applyPercentageFee","nameLocation":"1689:18:10","parameters":{"id":2712,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2709,"mutability":"mutable","name":"percentageFeeRate","nameLocation":"1715:17:10","nodeType":"VariableDeclaration","scope":2729,"src":"1708:24:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2708,"name":"uint24","nodeType":"ElementaryTypeName","src":"1708:6:10","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"},{"constant":false,"id":2711,"mutability":"mutable","name":"orderValue","nameLocation":"1742:10:10","nodeType":"VariableDeclaration","scope":2729,"src":"1734:18:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2710,"name":"uint256","nodeType":"ElementaryTypeName","src":"1734:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1707:46:10"},"returnParameters":{"id":2715,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2714,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":2729,"src":"1777:7:10","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2713,"name":"uint256","nodeType":"ElementaryTypeName","src":"1777:7:10","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1776:9:10"},"scope":2730,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"FeeLib","contractDependencies":[],"contractKind":"library","fullyImplemented":true,"linearizedBaseContracts":[2730],"name":"FeeLib","nameLocation":"353:6:10","scope":2731,"usedErrors":[2602,2605],"usedEvents":[]}],"license":"GPL-3.0-or-later"},"id":10}