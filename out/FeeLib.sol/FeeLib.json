{"abi":[{"type":"error","name":"DecimalsTooLarge","inputs":[]},{"type":"error","name":"FeeTooLarge","inputs":[]}],"bytecode":{"object":"0x6055604b600b8282823980515f1a607314603f577f4e487b71000000000000000000000000000000000000000000000000000000005f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212207e027c3a233a77bb01f385361f70f6709d9387d0ebf1e413e16c5ef59f4b269664736f6c63430008190033","sourceMap":"345:1562:12:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212207e027c3a233a77bb01f385361f70f6709d9387d0ebf1e413e16c5ef59f4b269664736f6c63430008190033","sourceMap":"345:1562:12:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.25+commit.b61c2a91\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"DecimalsTooLarge\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FeeTooLarge\",\"type\":\"error\"}],\"devdoc\":{\"errors\":{\"DecimalsTooLarge()\":[{\"details\":\"Decimals are too large\"}],\"FeeTooLarge()\":[{\"details\":\"Fee is too large\"}]},\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/dinary/common/FeeLib.sol\":\"FeeLib\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":@chainlink/=node_modules/@chainlink/\",\":@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/\",\":@openzeppelin/=node_modules/@openzeppelin/\",\":@prb/=node_modules/@prb/\",\":@scroll-tech/=node_modules/@scroll-tech/\",\":@thirdweb-dev/=node_modules/@thirdweb-dev/\",\":base64-sol/=node_modules/base64-sol/\",\":ds-test/=node_modules/@thirdweb-dev/dynamic-contracts/lib/forge-std/lib/ds-test/\",\":erc721a-upgradeable/=node_modules/erc721a-upgradeable/\",\":eth-gas-reporter/=node_modules/eth-gas-reporter/\",\":forge-std/=lib/forge-std/src/\",\":hardhat/=node_modules/hardhat/\",\":prb-math/=node_modules/prb-math/\",\":solady/=node_modules/solady/\",\":sstore2/=node_modules/@thirdweb-dev/dynamic-contracts/lib/sstore2/\"]},\"sources\":{\"contracts/dinary/common/FeeLib.sol\":{\"keccak256\":\"0x906960e350906a908851cfa3a90b0b85f6f4df5acb147f4c0d36dae9a32947b3\",\"license\":\"GPL-3.0-or-later\",\"urls\":[\"bzz-raw://fdb42f1f0552436cc992e9d2e3d509b76b2e9b4e3ec88074c1043cbf56fa06c7\",\"dweb:/ipfs/QmdT4MGge4afss72nNkzj7xDkggBUKYhG38sYxVN6YWbDs\"]},\"node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c\",\"dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq\"]},\"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol\":{\"keccak256\":\"0xaa761817f6cd7892fcf158b3c776b34551cde36f48ff9703d53898bc45a94ea2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0ad7c8d4d08938c8dfc43d75a148863fb324b80cf53e0a36f7e5a4ac29008850\",\"dweb:/ipfs/QmcrhfPgVNf5mkdhQvy1pMv51TFokD3Y4Wa5WZhFqVh8UV\"]},\"node_modules/@prb/math/src/Common.sol\":{\"keccak256\":\"0xaa374e2c26cc93e8c22a6953804ee05f811597ef5fa82f76824378b22944778b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://279c732e161d623cf4d8a9519ca4c42c0c2db99842d0eb2a20c10fde3fa722c9\",\"dweb:/ipfs/QmVViuUXbinQGqtG5M21SgVzKihiCbFUChd4tDhtvwRmxH\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.25+commit.b61c2a91"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"DecimalsTooLarge"},{"inputs":[],"type":"error","name":"FeeTooLarge"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@chainlink/=node_modules/@chainlink/","@eth-optimism/=node_modules/@chainlink/contracts/node_modules/@eth-optimism/","@openzeppelin/=node_modules/@openzeppelin/","@prb/=node_modules/@prb/","@scroll-tech/=node_modules/@scroll-tech/","@thirdweb-dev/=node_modules/@thirdweb-dev/","base64-sol/=node_modules/base64-sol/","ds-test/=node_modules/@thirdweb-dev/dynamic-contracts/lib/forge-std/lib/ds-test/","erc721a-upgradeable/=node_modules/erc721a-upgradeable/","eth-gas-reporter/=node_modules/eth-gas-reporter/","forge-std/=lib/forge-std/src/","hardhat/=node_modules/hardhat/","prb-math/=node_modules/prb-math/","solady/=node_modules/solady/","sstore2/=node_modules/@thirdweb-dev/dynamic-contracts/lib/sstore2/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/dinary/common/FeeLib.sol":"FeeLib"},"evmVersion":"cancun","libraries":{}},"sources":{"contracts/dinary/common/FeeLib.sol":{"keccak256":"0x906960e350906a908851cfa3a90b0b85f6f4df5acb147f4c0d36dae9a32947b3","urls":["bzz-raw://fdb42f1f0552436cc992e9d2e3d509b76b2e9b4e3ec88074c1043cbf56fa06c7","dweb:/ipfs/QmdT4MGge4afss72nNkzj7xDkggBUKYhG38sYxVN6YWbDs"],"license":"GPL-3.0-or-later"},"node_modules/@openzeppelin/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70","urls":["bzz-raw://0ea104e577e63faea3b69c415637e99e755dcbf64c5833d7140c35a714d6d90c","dweb:/ipfs/Qmau6x4Ns9XdyynRCNNp3RhLqijJjFm7z5fyZazfYFGYdq"],"license":"MIT"},"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol":{"keccak256":"0xaa761817f6cd7892fcf158b3c776b34551cde36f48ff9703d53898bc45a94ea2","urls":["bzz-raw://0ad7c8d4d08938c8dfc43d75a148863fb324b80cf53e0a36f7e5a4ac29008850","dweb:/ipfs/QmcrhfPgVNf5mkdhQvy1pMv51TFokD3Y4Wa5WZhFqVh8UV"],"license":"MIT"},"node_modules/@prb/math/src/Common.sol":{"keccak256":"0xaa374e2c26cc93e8c22a6953804ee05f811597ef5fa82f76824378b22944778b","urls":["bzz-raw://279c732e161d623cf4d8a9519ca4c42c0c2db99842d0eb2a20c10fde3fa722c9","dweb:/ipfs/QmVViuUXbinQGqtG5M21SgVzKihiCbFUChd4tDhtvwRmxH"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"contracts/dinary/common/FeeLib.sol","id":2433,"exportedSymbols":{"FeeLib":[2432],"IERC20":[72144],"IERC20Metadata":[72170],"PrbMath":[2294]},"nodeType":"SourceUnit","src":"45:1863:12","nodes":[{"id":2293,"nodeType":"PragmaDirective","src":"45:24:12","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":2294,"nodeType":"ImportDirective","src":"120:45:12","nodes":[],"absolutePath":"node_modules/@prb/math/src/Common.sol","file":"@prb/math/src/Common.sol","nameLocation":"157:7:12","scope":2433,"sourceUnit":79389,"symbolAliases":[],"unitAlias":"PrbMath"},{"id":2295,"nodeType":"ImportDirective","src":"268:75:12","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol","file":"@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol","nameLocation":"-1:-1:-1","scope":2433,"sourceUnit":72171,"symbolAliases":[],"unitAlias":""},{"id":2432,"nodeType":"ContractDefinition","src":"345:1562:12","nodes":[{"id":2298,"nodeType":"VariableDeclaration","src":"391:55:12","nodes":[],"constant":true,"mutability":"constant","name":"_ONEHUNDRED_PERCENT","nameLocation":"415:19:12","scope":2432,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2296,"name":"uint24","nodeType":"ElementaryTypeName","src":"391:6:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"value":{"hexValue":"315f3030305f303030","id":2297,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"437:9:12","typeDescriptions":{"typeIdentifier":"t_rational_1000000_by_1","typeString":"int_const 1000000"},"value":"1_000_000"},"visibility":"private"},{"id":2301,"nodeType":"VariableDeclaration","src":"453:46:12","nodes":[],"constant":true,"mutability":"constant","name":"_FLAT_FEE_DECIMALS","nameLocation":"477:18:12","scope":2432,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":2299,"name":"uint64","nodeType":"ElementaryTypeName","src":"453:6:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"value":{"hexValue":"38","id":2300,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"498:1:12","typeDescriptions":{"typeIdentifier":"t_rational_8_by_1","typeString":"int_const 8"},"value":"8"},"visibility":"private"},{"id":2304,"nodeType":"ErrorDefinition","src":"536:20:12","nodes":[],"documentation":{"id":2302,"nodeType":"StructuredDocumentation","src":"506:25:12","text":"@dev Fee is too large"},"errorSelector":"fc5bee12","name":"FeeTooLarge","nameLocation":"542:11:12","parameters":{"id":2303,"nodeType":"ParameterList","parameters":[],"src":"553:2:12"}},{"id":2307,"nodeType":"ErrorDefinition","src":"597:25:12","nodes":[],"documentation":{"id":2305,"nodeType":"StructuredDocumentation","src":"561:31:12","text":"@dev Decimals are too large"},"errorSelector":"3c9c1e2d","name":"DecimalsTooLarge","nameLocation":"603:16:12","parameters":{"id":2306,"nodeType":"ParameterList","parameters":[],"src":"619:2:12"}},{"id":2320,"nodeType":"FunctionDefinition","src":"628:157:12","nodes":[],"body":{"id":2319,"nodeType":"Block","src":"701:84:12","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2314,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2312,"name":"_percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2309,"src":"715:18:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":2313,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2298,"src":"737:19:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"src":"715:41:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2318,"nodeType":"IfStatement","src":"711:67:12","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2315,"name":"FeeTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2304,"src":"765:11:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2316,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"765:13:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2317,"nodeType":"RevertStatement","src":"758:20:12"}}]},"implemented":true,"kind":"function","modifiers":[],"name":"checkPercentageFeeRate","nameLocation":"637:22:12","parameters":{"id":2310,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2309,"mutability":"mutable","name":"_percentageFeeRate","nameLocation":"667:18:12","nodeType":"VariableDeclaration","scope":2320,"src":"660:25:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2308,"name":"uint24","nodeType":"ElementaryTypeName","src":"660:6:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"}],"src":"659:27:12"},"returnParameters":{"id":2311,"nodeType":"ParameterList","parameters":[],"src":"701:0:12"},"scope":2432,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2349,"nodeType":"FunctionDefinition","src":"791:294:12","nodes":[],"body":{"id":2348,"nodeType":"Block","src":"895:190:12","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2331,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2329,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2324,"src":"909:17:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"id":2330,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2298,"src":"930:19:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"src":"909:40:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2335,"nodeType":"IfStatement","src":"905:66:12","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2332,"name":"FeeTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2304,"src":"958:11:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2333,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"958:13:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2334,"nodeType":"RevertStatement","src":"951:20:12"}},{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2338,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2336,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2324,"src":"988:17:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":2337,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1009:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"988:22:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":2345,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1077:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":2346,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"988:90:12","trueExpression":{"arguments":[{"id":2341,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2322,"src":"1028:5:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":2342,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2324,"src":"1035:17:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},{"id":2343,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2298,"src":"1054:19:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint24","typeString":"uint24"},{"typeIdentifier":"t_uint24","typeString":"uint24"}],"expression":{"id":2339,"name":"PrbMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2294,"src":"1013:7:12","typeDescriptions":{"typeIdentifier":"t_module_79389","typeString":"module \"node_modules/@prb/math/src/Common.sol\""}},"id":2340,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1021:6:12","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":78970,"src":"1013:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":2344,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1013:61:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":2328,"id":2347,"nodeType":"Return","src":"981:97:12"}]},"implemented":true,"kind":"function","modifiers":[],"name":"percentageFeeForValue","nameLocation":"800:21:12","parameters":{"id":2325,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2322,"mutability":"mutable","name":"value","nameLocation":"830:5:12","nodeType":"VariableDeclaration","scope":2349,"src":"822:13:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2321,"name":"uint256","nodeType":"ElementaryTypeName","src":"822:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":2324,"mutability":"mutable","name":"percentageFeeRate","nameLocation":"844:17:12","nodeType":"VariableDeclaration","scope":2349,"src":"837:24:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2323,"name":"uint24","nodeType":"ElementaryTypeName","src":"837:6:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"}],"src":"821:41:12"},"returnParameters":{"id":2328,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2327,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":2349,"src":"886:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2326,"name":"uint256","nodeType":"ElementaryTypeName","src":"886:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"885:9:12"},"scope":2432,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2409,"nodeType":"FunctionDefinition","src":"1091:583:12","nodes":[],"body":{"id":2408,"nodeType":"Block","src":"1204:470:12","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":2360,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2358,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2351,"src":"1218:20:12","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3138","id":2359,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1241:2:12","typeDescriptions":{"typeIdentifier":"t_rational_18_by_1","typeString":"int_const 18"},"value":"18"},"src":"1218:25:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2364,"nodeType":"IfStatement","src":"1214:56:12","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":2361,"name":"DecimalsTooLarge","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2307,"src":"1252:16:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":2362,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1252:18:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2363,"nodeType":"RevertStatement","src":"1245:25:12"}},{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2367,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2365,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2353,"src":"1284:11:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":2366,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1299:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1284:16:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2370,"nodeType":"IfStatement","src":"1280:30:12","trueBody":{"expression":{"hexValue":"30","id":2368,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1309:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":2357,"id":2369,"nodeType":"Return","src":"1302:8:12"}},{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2373,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2371,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2351,"src":"1324:20:12","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":2372,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2301,"src":"1347:18:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1324:41:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2388,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2386,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2351,"src":"1475:20:12","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":2387,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2301,"src":"1498:18:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1475:41:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":2405,"nodeType":"Block","src":"1622:46:12","statements":[{"expression":{"id":2403,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2401,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2356,"src":"1636:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":2402,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2353,"src":"1646:11:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1636:21:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2404,"nodeType":"ExpressionStatement","src":"1636:21:12"}]},"id":2406,"nodeType":"IfStatement","src":"1471:197:12","trueBody":{"id":2400,"nodeType":"Block","src":"1518:98:12","statements":[{"expression":{"id":2398,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2389,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2356,"src":"1532:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2397,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2390,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2353,"src":"1542:11:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2396,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":2391,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1556:2:12","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2394,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2392,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2301,"src":"1563:18:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":2393,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2351,"src":"1584:20:12","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"1563:41:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"id":2395,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1562:43:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1556:49:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1542:63:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1532:73:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2399,"nodeType":"ExpressionStatement","src":"1532:73:12"}]}},"id":2407,"nodeType":"IfStatement","src":"1320:348:12","trueBody":{"id":2385,"nodeType":"Block","src":"1367:98:12","statements":[{"expression":{"id":2383,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":2374,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2356,"src":"1381:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2382,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2375,"name":"perOrderFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2353,"src":"1391:11:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":2381,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":2376,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1405:2:12","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint64","typeString":"uint64"},"id":2379,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2377,"name":"paymentTokenDecimals","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2351,"src":"1412:20:12","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":2378,"name":"_FLAT_FEE_DECIMALS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2301,"src":"1435:18:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1412:41:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"id":2380,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1411:43:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"1405:49:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1391:63:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1381:73:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":2384,"nodeType":"ExpressionStatement","src":"1381:73:12"}]}}]},"implemented":true,"kind":"function","modifiers":[],"name":"flatFeeForOrder","nameLocation":"1100:15:12","parameters":{"id":2354,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2351,"mutability":"mutable","name":"paymentTokenDecimals","nameLocation":"1122:20:12","nodeType":"VariableDeclaration","scope":2409,"src":"1116:26:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":2350,"name":"uint8","nodeType":"ElementaryTypeName","src":"1116:5:12","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"visibility":"internal"},{"constant":false,"id":2353,"mutability":"mutable","name":"perOrderFee","nameLocation":"1151:11:12","nodeType":"VariableDeclaration","scope":2409,"src":"1144:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":2352,"name":"uint64","nodeType":"ElementaryTypeName","src":"1144:6:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"1115:48:12"},"returnParameters":{"id":2357,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2356,"mutability":"mutable","name":"flatFee","nameLocation":"1195:7:12","nodeType":"VariableDeclaration","scope":2409,"src":"1187:15:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2355,"name":"uint256","nodeType":"ElementaryTypeName","src":"1187:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1186:17:12"},"scope":2432,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":2431,"nodeType":"FunctionDefinition","src":"1680:225:12","nodes":[],"body":{"id":2430,"nodeType":"Block","src":"1786:119:12","nodes":[],"statements":[{"expression":{"condition":{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":2420,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2418,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2411,"src":"1803:17:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":2419,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1824:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1803:22:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"hexValue":"30","id":2427,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1897:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"id":2428,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"1803:95:12","trueExpression":{"arguments":[{"id":2423,"name":"orderValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2413,"src":"1843:10:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":2424,"name":"percentageFeeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2411,"src":"1855:17:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},{"id":2425,"name":"_ONEHUNDRED_PERCENT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2298,"src":"1874:19:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint24","typeString":"uint24"},{"typeIdentifier":"t_uint24","typeString":"uint24"}],"expression":{"id":2421,"name":"PrbMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2294,"src":"1828:7:12","typeDescriptions":{"typeIdentifier":"t_module_79389","typeString":"module \"node_modules/@prb/math/src/Common.sol\""}},"id":2422,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1836:6:12","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":78970,"src":"1828:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":2426,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1828:66:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":2417,"id":2429,"nodeType":"Return","src":"1796:102:12"}]},"implemented":true,"kind":"function","modifiers":[],"name":"applyPercentageFee","nameLocation":"1689:18:12","parameters":{"id":2414,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2411,"mutability":"mutable","name":"percentageFeeRate","nameLocation":"1715:17:12","nodeType":"VariableDeclaration","scope":2431,"src":"1708:24:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"},"typeName":{"id":2410,"name":"uint24","nodeType":"ElementaryTypeName","src":"1708:6:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"visibility":"internal"},{"constant":false,"id":2413,"mutability":"mutable","name":"orderValue","nameLocation":"1742:10:12","nodeType":"VariableDeclaration","scope":2431,"src":"1734:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2412,"name":"uint256","nodeType":"ElementaryTypeName","src":"1734:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1707:46:12"},"returnParameters":{"id":2417,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2416,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":2431,"src":"1777:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":2415,"name":"uint256","nodeType":"ElementaryTypeName","src":"1777:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1776:9:12"},"scope":2432,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"FeeLib","contractDependencies":[],"contractKind":"library","fullyImplemented":true,"linearizedBaseContracts":[2432],"name":"FeeLib","nameLocation":"353:6:12","scope":2433,"usedErrors":[2304,2307],"usedEvents":[]}],"license":"GPL-3.0-or-later"},"id":12}